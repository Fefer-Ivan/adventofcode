[
  {
    '$match': {
      '$expr': {
        '$or': [
          {
            '$and': [
              {
                '$lte': [
                  '$x1', '$x2'
                ]
              }, {
                '$gte': [
                  '$y1', '$y2'
                ]
              }
            ]
          }, {
            '$and': [
              {
                '$lte': [
                  '$x2', '$x1'
                ]
              }, {
                '$gte': [
                  '$y2', '$y1'
                ]
              }
            ]
          }
        ]
      }
    }
  }, {
    '$count': 'total'
  }
]
